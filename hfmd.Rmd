---
title: "Hand-foot-and-mouth disease"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Constants

Data folder:

```{r}
data_folder <- "~/Library/CloudStorage/OneDrive-OxfordUniversityClinicalResearchUnit/GitHub/OUCRU-Modelling/hfmd/"
```


## Packages

```{r}
library(readxl)
library(dplyr)
library(stringr)
library(purrr)
library(tidyr)
```


## Functions

```{r}
read_excel2 <- function(x, ...) {
  out <- readxl::read_excel(paste0(data_folder, x), skip = 1, ...)
  out |>
    names() |>
    str_remove("^.*\r*\n\\(") |>
    str_remove("\\)") |>
    str_replace("...12", "month") |>
    str_replace("...13", "year") %>%
    setNames(out, .) |> 
    filter(! is.na(Participant_No))
}
```


## Loading data

```{r}
sero <- data_folder |>
  dir() |> 
  map_dfr(read_excel2)
```

```{r}
sero |> 
  mutate(across(Neutralization, ~ .x == "Yes")) |> 
  replace_na(list(Neutralization = FALSE))
```

